---
layout: index
title: Build Instructions for Mac OS X
prev: 
next:
current-version: v4.2 
---

Although the GCAM source code offers an "xcode3" branch, the Mac version can be built using the Makefiles in the "linux" directory (gcam-core/cvs/objects/build/linux).

## 1. Install Prerequisites

### Development tools
- Install java SDK 1.8
- Install a C++ development environment on the Mac.  The easiest way
  to do this is to install XCode, available in the App Store at no cost.


### 1. Install xerces library

Download the "xerces" library, which is available at [https://xerces.apache.org/xerces-c/download.cgi](https://xerces.apache.org/xerces-c/download.cgi)

Once you expand the xerces zip or tar file, you can find detailed installation instructions for building and installing the library in `doc/html/index.html`. 

Set the following environment variables:
* `XERCES_SRC`: Set to the top-level directory created when you unpacked the xerces zip or tar file.
* `XERCES_INSTALL`:  Set to the directory in which you want to install xerces.

Example:  
```
export XERCES_SRC=$HOME/GCAM/build/xerces-c-3.1.4
export XERCES_INSTALL=$HOME/GCAM/libs/xerces
```

With these variables set, you can configure and build xerces as follows:
```
cd $XERCES_SRC
./configure CFLAGS="-arch x86_64" CXXFLAGS="-arch x86_64" --prefix=$XERCES_INSTALL --disable-netaccessor-curl
make install
```
The `--disable-netaccessor-curl` flag avoids having xerces use the curl library, a feature GCAM doesn't require.

After installing xerces, you can optionally delete all the unnecessary intermediate files that were generated by running:

```	
make clean
```

Set the following environment variables to the directory where you built xerces:  
```
export XERCES_INCLUDE=$XERCES_INSTALL/include
export XERCES_LIB=$XERCES_INSTALL/lib
```

### Install boost headers

You also need to download the  [Boost C++ library](http://www.boost.org/users/download/). GCAM uses the "header only" features, so there is nothing to build. 

Set the `BOOST_INCLUDE` environment variable to indicate where you unpacked the boost library.  Example:

```
export BOOST_INCLUDE=$HOME/GCAM/build/boost_1_61_0
```

## 2. Build GCAM

Change directory to wherever you have the GCAM source code, and then down to the linux directory, e.g.,

```
cd ~/GCAM/gcam-core/cvs/objects/build/linux
```

You will need to set some environment variables to indicate where to find the necessary Java libraries.  `JAVA_HOME` should be set to the home directory for the Java SDK (Software Development Kit) on your system, which you should have installed in step 1.  The exact name of this directory depends on the version of Java you have installed.  The example below is for Java 1.8.0_74

```
export JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home"
export JAVA_LIB="$JAVA_HOME/jre/lib/server"
export JAVA_INCLUDE="$JAVA_HOME/include"
```

<!-- I'm pretty sure that the -std=c++11 flag should be part of the default CXXFLAGS in the build.  Double check
        and delete this section if so.  -rpl
Depending on the version of XCode (and ultimate, of the C++ compiler on your machine), you may have to specify a particular C++ language version to use. In my case (running XCode 6.2 on Mac OS 10.9.5) I had to define this additional environment variable:

	export CXX='c++ -std=c++11'
-->

GCAM also needs to know where to find certain java libraries (`*.jar` files). Note the backslash before the `*`, which prevents it from being expanded by the shell:

```
export JARS_LIB=/wherever/on/your/machine/\*
```

After that, you should be ready to build.  Run:

```
make gcam
```

Note that there are some warnings, but there should be no errors. When the compilation completes, you should have a version of GCAM in `gcam-core/exe/gcam.exe`.

Test the version by changing to `gcam-core/exe` directory and running the new executable:

```
cd ../../../../exe
./gcam.exe -Cconfiguration_ref.xml -Llog_conf.xml
```
